DSP balancing cloned from AS-207732
cxo-array560-c2 has no active dsp pods from 2025-07-24T21:35:15 to 2025-07-24T21:51:08 when orca reports IO failure
**/auto/bugs.cxo/AS-207732/artifacts_20250725_005724_281414/dna_decompress/cxo-rd-cluster67**

**./log.250725.003440.0001/cxo-array559-c1/var/log/pods/ds_dspmapper-687678669f-qzqbl_236df50a-ecca-4c90-ac76-17877f8dc11e/dspmapper/0.log**
dspmapper log in the right timeframe:
```
2025-07-24T21:30:57.280444398Z stdout F [INFO] 2025-07-24,21:30:57.280395Z awaitingnexteventstate.go:33] Received event: {nodes K8_NODE_DATA_NOT_READY cxo-array560-c2}
2025-07-24T21:30:57.280454367Z stdout F [INFO] 2025-07-24,21:30:57.280418Z statemachine.go:386] Setting state from AwaitingNextEvent to HandlingDataNotReady
2025-07-24T21:30:57.280466379Z stdout F [INFO] 2025-07-24,21:30:57.280436Z dspmapper.go:75] Current state: HandlingDataNotReady
2025-07-24T21:30:57.280504089Z stdout F [DEBUG] 2025-07-24,21:30:57.280451Z statemachine.go:295] Calling onStep() of state HandlingDataNotReady
2025-07-24T21:30:57.280564362Z stdout F [INFO] 2025-07-24,21:30:57.280479Z k8sclient.go:327] Adding node label key:dsp-aversion-node-data-not-ready value: to node:cxo-array560-c2
2025-07-24T21:30:57.340456456Z stdout F [INFO] 2025-07-24,21:30:57.340371Z k8sclient.go:668] Deleting Pod dsp-20047-75b6cf6b74-4lgls in namespace:ds-dsp
2025-07-24T21:30:57.343470794Z stdout F [INFO] 2025-07-24,21:30:57.343387Z k8sclient.go:668] Deleting Pod dsp-26655-85dbf5f879-fp9k5 in namespace:ds-dsp
2025-07-24T21:30:57.346334062Z stdout F [INFO] 2025-07-24,21:30:57.346254Z k8sclient.go:668] Deleting Pod dsp-28416-5565b87d6-vdmxn in namespace:ds-dsp
2025-07-24T21:30:57.348680866Z stdout F [INFO] 2025-07-24,21:30:57.348606Z k8sclient.go:668] Deleting Pod dsp-39366-96b85bbff-8bwsz in namespace:ds-dsp
2025-07-24T21:30:57.351125052Z stdout F [INFO] 2025-07-24,21:30:57.351059Z k8sclient.go:668] Deleting Pod dsp-53042-77f474ff5c-cwq8t in namespace:ds-dsp
2025-07-24T21:30:57.354038072Z stdout F [INFO] 2025-07-24,21:30:57.353946Z k8sclient.go:668] Deleting Pod dsp-59967-6c8b74b45f-qcqhc in namespace:ds-dsp
.....
2025-07-24T21:34:35.085091302Z stdout F [INFO] 2025-07-24,21:34:35.084987Z k8snodes.go:488] Received node cxo-array560-c2 event K8_NODE_DATA_READY, will be processed after 10s delay
2025-07-24T21:34:45.089627445Z stdout F [INFO] 2025-07-24,21:34:45.089544Z k8snodes.go:392] Going to queue node cxo-array560-c2 event {nodes K8_NODE_DATA_READY cxo-array560-c2} for processing
2025-07-24T21:34:45.089658974Z stdout F [DEBUG] 2025-07-24,21:34:45.08959Z event_manager.go:207] Time taken to process {nodes K8_NODE_DATA_READY cxo-array560-c2} event, {Instance count: 22, Current elapsed: 3.897µs, Average elapsed: 143.066604ms}
.....
2025-07-24T21:35:18.135400922Z stdout F [INFO] 2025-07-24,21:35:18.1353Z awaitingnexteventstate.go:33] Received event: {nodes K8_NODE_DATA_NOT_READY cxo-array560-c2}
2025-07-24T21:35:18.135413926Z stdout F [INFO] 2025-07-24,21:35:18.135361Z statemachine.go:386] Setting state from AwaitingNextEvent to HandlingDataNotReady
2025-07-24T21:35:18.135454001Z stdout F [INFO] 2025-07-24,21:35:18.135393Z dspmapper.go:75] Current state: HandlingDataNotReady
2025-07-24T21:35:18.135469931Z stdout F [DEBUG] 2025-07-24,21:35:18.135408Z statemachine.go:295] Calling onStep() of state HandlingDataNotReady
2025-07-24T21:35:18.135480871Z stdout F [INFO] 2025-07-24,21:35:18.135423Z k8sclient.go:327] Adding node label key:dsp-aversion-node-data-not-ready value: to node:cxo-array560-c2
.....
2025-07-24T21:50:07.175695376Z stdout F [INFO] 2025-07-24,21:50:07.175595Z k8snodes.go:488] Received node cxo-array560-c2 event K8_NODE_DATA_READY, will be processed after 10s delay
2025-07-24T21:50:17.176416558Z stdout F [INFO] 2025-07-24,21:50:17.176304Z k8snodes.go:392] Going to queue node cxo-array560-c2 event {nodes K8_NODE_DATA_READY cxo-array560-c2} for processing
2025-07-24T21:50:17.176450762Z stdout F [DEBUG] 2025-07-24,21:50:17.176362Z event_manager.go:207] Time taken to process {nodes K8_NODE_DATA_READY cxo-array560-c2} event, {Instance count: 24, Current elapsed: 5.079µs, Average elapsed: 131.144782ms}
.....
2025-07-24T22:00:40.677307646Z stdout F [DEBUG] 2025-07-24,22:00:40.677171Z k8snodes.go:223] Node cxo-array560-c2 got tainted and transitioned into NOT_READY state
2025-07-24T22:00:40.67733131Z stdout F [INFO] 2025-07-24,22:00:40.677215Z k8snodes.go:488] Received node cxo-array560-c2 event K8_NODE_DATA_NOT_READY, will be processed after 10s delay/taint
2025-07-24T22:00:50.677671983Z stdout F [INFO] 2025-07-24,22:00:50.677476Z k8snodes.go:392] Going to queue node cxo-array560-c2 event {nodes K8_NODE_DATA_NOT_READY cxo-array560-c2} for processing
2025-07-24T22:00:50.677699715Z stdout F [DEBUG] 2025-07-24,22:00:50.677536Z event_manager.go:207] Time taken to process {nodes K8_NODE_DATA_NOT_READY cxo-array560-c2} event, {Instance count: 25, Current elapsed: 3.517µs, Average elapsed: 125.899132ms}
2025-07-24T22:00:50.677706918Z stdout F [INFO] 2025-07-24,22:00:50.677564Z k8snodes.go:395] Took 0.000039 seconds to process node cxo-array560-c2 event {nodes K8_NODE_DATA_NOT_READY cxo-array560-c2}
2025-07-24T22:00:50.677714763Z stdout F [INFO] 2025-07-24,22:00:50.677587Z awaitingnexteventstate.go:33] Received event: {nodes K8_NODE_DATA_NOT_READY cxo-array560-c2}
2025-07-24T22:00:50.677730843Z stdout F [INFO] 2025-07-24,22:00:50.677631Z statemachine.go:386] Setting state from AwaitingNextEvent to HandlingDataNotReady
2025-07-24T22:00:50.677745961Z stdout F [INFO] 2025-07-24,22:00:50.677679Z dspmapper.go:75] Current state: HandlingDataNotReady
2025-07-24T22:00:50.677757633Z stdout F [DEBUG] 2025-07-24,22:00:50.677695Z statemachine.go:295] Calling onStep() of state HandlingDataNotReady
2025-07-24T22:00:50.67777214Z stdout F [INFO] 2025-07-24,22:00:50.677713Z k8sclient.go:327] Adding node label key:dsp-aversion-node-data-not-ready value: to node:cxo-array560-c2
2025-07-24T22:00:50.701380241Z stdout F [INFO] 2025-07-24,22:00:50.701267Z k8sclient.go:668] Deleting Pod dsp-19980-54944b6b5-n92hz in namespace:ds-dsp
2025-07-24T22:00:50.704214284Z stdout F [INFO] 2025-07-24,22:00:50.70411Z k8sclient.go:668] Deleting Pod dsp-21725-6bb89cfd6-f2gdz in namespace:ds-dsp
2025-07-24T22:00:50.706918426Z stdout F [INFO] 2025-07-24,22:00:50.706828Z k8sclient.go:668] Deleting Pod dsp-26655-85dbf5f879-gpsmn in namespace:ds-dsp
2025-07-24T22:00:50.70950083Z stdout F [INFO] 2025-07-24,22:00:50.709418Z k8sclient.go:668] Deleting Pod dsp-31337-cbdc6fcfc-g6j6v in namespace:ds-dsp
2025-07-24T22:00:50.711712754Z stdout F [INFO] 2025-07-24,22:00:50.711645Z k8sclient.go:668] Deleting Pod dsp-39366-96b85bbff-gs5sc in namespace:ds-dsp
2025-07-24T22:00:50.713961486Z stdout F [INFO] 2025-07-24,22:00:50.7139Z k8sclient.go:668] Deleting Pod dsp-59967-6c8b74b45f-bfsxx in namespace:ds-dsp
2025-07-24T22:00:50.718663721Z stdout F [INFO] 2025-07-24,22:00:50.718609Z k8sclient.go:585] Got empty pod list for {Namespace:ds-root-dsp LabelSelector:type=root}
.....
2025-07-24T22:04:18.547224368Z stdout F [INFO] 2025-07-24,22:04:18.547096Z k8snodes.go:488] Received node cxo-array560-c2 event K8_NODE_DATA_READY, will be processed after 10s delay
2025-07-24T22:04:28.548430856Z stdout F [INFO] 2025-07-24,22:04:28.548315Z k8snodes.go:392] Going to queue node cxo-array560-c2 event {nodes K8_NODE_DATA_READY cxo-array560-c2} for processing
2025-07-24T22:04:28.548456724Z stdout F [DEBUG] 2025-07-24,22:04:28.548369Z event_manager.go:207] Time taken to process {nodes K8_NODE_DATA_READY cxo-array560-c2} event, {Instance count: 26, Current elapsed: 4.94µs, Average elapsed: 121.057047ms}
```

**./log.250725.003440.0001/cxo-array560-c2/var/log/pods/ds_npd-b226b31d-8dpr7_e7370537-1f67-46d4-b4d5-5c83b30bb87a/node-problem-detector/3.log**
cxo-array560-c2 node problem detector logs indicate:
Data not ready condition at 2025-07-24T21:35:07 is caused by "key with node lease does not exist"
Becomes data not ready again at 2025-07-24T21:50:06

**./log.250725.003440.0001/cxo-array560-c2/var/log/files/boot.log.1.gz**
boot.log shows node reboots from: 
20:31:36 - 20:35:06 ** This is the test power cycling the node (STEP 1)
21:00:13 - 21:04:41
21:30:25 - 21:33:25 ** This is the test power cycling the node
22:00:19 - 22:03:11

**./log.250725.003440.0001/cxo-array558-c1/var/log/pods_archive/kube-system_kube-scheduler-cxo-array558-c1_8382b3b0a236f95e7a88c54385a5b605/kube-scheduler/2.log**
kube-scheduler is showing a failure to acquire a lease from 2025-07-24T13:37 to 2025-07-24T23:22:08
- This means that this one is not the leader - lease is for leader election

DSP counts at the time of pods.txt collection. Healthy distribution
cxo-array558-c1: 6
cxo-array558-c2: 6
cxo-array559-c1: 6
cxo-array559-c2: 6
cxo-array560-c1: 6
cxo-array560-c2: 6
cxo-array561-c1: 6
cxo-array561-c2: 6
Total: 48

dsp-20047

2025-07-24 20:31:41,386 525222 redfish.rest.v1 INFO v1 test_error_injection[se2:co1:se2] Attempt 1 of /redfish/v1/Systems/1/Actions/ComputerSystem.Reset
/